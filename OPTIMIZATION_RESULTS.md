# 전략 최적화 결과 요약

**최적화 일자**: 2025-12-31
**최적화 방법**: 3-Stage Grid Search (Coarse → Fine → Robustness)
**최적화 기간**: 2002-02-22 ~ 2025-12-29 (23.8년)
**데이터**: kospi_sp500_filtered_longterm.xlsx

---

## 📊 파라미터 변경 내역

| 파라미터 | 기존 (명세서) | 최적화 후 | 변경폭 | 비고 |
|---------|-------------|----------|-------|------|
| **ENTRY_THRESHOLD** | 2.0 | 2.15 | +7.5% | 진입 기준 상향 (더 보수적) |
| **EXIT_THRESHOLD** | 0.0 | 0.0 | - | 유지 (평균 회귀 시 즉시 청산) |
| **STOP_LOSS_MULTIPLIER** | 3.0 | 3.3 | +10% | 손절 기준 완화 (Z=6.0 → 7.095) |
| **VIX_QUANTILE** | 0.85 | 0.94 | +10.6% | 필터 완화 (15% 차단 → 6% 차단) |
| **FX_QUANTILE** | 0.90 | 0.96 | +6.7% | 필터 완화 (10% 차단 → 4% 차단) |

---

## 🎯 성과 개선 효과

### 1. 전체 기간 (2000-01-05 ~ 2025-12-29, 26년)

| 지표 | 기존 전략 | 최적화 전략 | 개선폭 |
|------|----------|-----------|-------|
| **연환산 수익률** | 4.07% | 8.39% | **+106%** |
| **연환산 변동성** | 9.83% | 11.20% | +14% |
| **Sharpe Ratio** | 0.41 | 0.75 | **+83%** |
| **MDD** | -26.56% | -15.72% | **+41% 개선** |
| **누적 수익률** | 141.66% | 576.80% | **+307%** |
| **Hit Ratio** | 13.08% | 19.15% | **+46%** |

### 2. 거래 활동 비교

| 항목 | 기존 전략 | 최적화 전략 | 변화 |
|------|----------|-----------|-----|
| **총 거래 횟수** | 284회 | 198회 | -30% (더 선별적) |
| **연평균 거래** | 10.9회 | 7.6회 | -30% |
| **포지션 보유율** | 24.1% | 35.6% | +48% (더 적극적) |
| **Long Days** | 13.0% | 23.8% | +83% |
| **Short Days** | 11.1% | 11.8% | +6% |
| **필터 차단일** | 29.3% | 19.0% | -35% (거래 기회 증가) |

---

## 🔍 최적화 전략의 특징

### 1. **진입 기준 상향 (2.0 → 2.15)**
- Z-Score가 더 극단적일 때만 진입
- 거래 횟수 감소 (-30%)
- 승률 향상 (13.08% → 19.15%)

### 2. **필터 완화 (VIX 0.85→0.94, FX 0.90→0.96)**
- 극단적 변동성 구간만 차단
- 필터 차단일 감소 (29.3% → 19.0%)
- 포지션 보유율 증가 (24.1% → 35.6%)
- 거래 기회 확대로 수익률 개선

### 3. **손절 기준 완화 (3.0 → 3.3)**
- Z=6.0 → Z=7.095
- 평균 회귀 가설에 더 오래 베팅
- 단, 25년간 손절 미발동 (안정적 전략)

---

## 📈 연도별 성과 분석

### 최근 5년 거래 활동 (2021~2025)

| 연도 | Long Entries | Short Entries | Total Trades | 특징 |
|------|--------------|---------------|--------------|------|
| 2021 | 3 | 4 | 7 | 저활동 |
| 2022 | 5 | 4 | 9 | 중활동 |
| 2023 | 2 | 3 | 5 | 저활동 (필터 효과) |
| 2024 | 4 | 4 | 8 | 균형 거래 |
| 2025 | 3 | 3 | 6 | 균형 거래 |

### 고활동 연도
- **2018년**: 19회 (최다)
- **2013년**: 16회
- **2006년, 2017년**: 12~14회

---

## 🎓 최적화 방법론

### Stage 1: Coarse Grid Search
- 탐색 범위: 720개 조합
- 파라미터:
  - ENTRY: [1.0, 1.5, 2.0, 2.5, 3.0]
  - EXIT: [0.0, 0.5, 1.0]
  - VIX_Q: [0.75, 0.80, 0.85, 0.90]
  - FX_Q: [0.85, 0.90, 0.95]
  - STOP_MULT: [2.0, 2.5, 3.0, 3.5]

### Stage 2: Fine Grid Search
- 탐색 범위: 33,880개 조합
- Best ± 0.25 (Entry/Exit) 또는 ± 0.05 (VIX/FX)
- Step Size: 0.01~0.1

### Stage 3: Robustness Test
- 최적값 ±5% 범위 테스트
- Sharpe Std: 0.042 (매우 안정적 ✅)
- Sharpe Range: 0.70 ~ 0.78

### 스코어링 함수 (Balanced Mode)
```python
Score = 0.40 × Sharpe + 0.30 × Calmar + 0.20 × (1 - |Skew|/2) + 0.10 × Stability
```

---

## ⚠️ 주의사항

### 1. Walk-Forward 성과 불일치
- **전구간 최적화**: Sharpe 0.75, MDD -15.72%
- **Walk-Forward OOS**: Sharpe -0.12, MDD -39.54%
- **원인**: 오버피팅 가능성 (In-sample 최적화)

### 2. 실전 적용 시 고려사항
- Walk-Forward 결과가 부정적이므로 **Out-of-sample 검증 필수**
- 최근 2~3년 데이터로 재검증 권장
- 파라미터를 더 보수적으로 조정 고려 (Conservative Mode)

### 3. 오버피팅 방지 방안
- 최근 3~5년 데이터만으로 별도 검증
- 실제 거래 전 Paper Trading 권장
- 파라미터 Robustness Test 통과 (✅ 완료)

---

## 💡 실전 적용 권장사항

### 1. 단계적 적용
1. **Phase 1**: 최적화 파라미터로 최근 3년 재검증
2. **Phase 2**: Paper Trading 3~6개월
3. **Phase 3**: 소액 실전 (총 포트폴리오의 5~10%)
4. **Phase 4**: 성과 확인 후 비중 확대

### 2. 모니터링 지표
- 월별 Sharpe Ratio (0.5 이상 유지 목표)
- 분기별 MDD (-10% 이내 목표)
- 거래 횟수 (연 6~10회 정상 범위)

### 3. 재최적화 주기
- **분기별**: 성과 검토
- **반기별**: 파라미터 Robustness 체크
- **연간**: Grid Search 재실행

---

## 📁 관련 파일

### 최적화 결과
- `grid_search_improved/20251231_130402/stage1_coarse_grid.csv`
- `grid_search_improved/20251231_130402/stage2_fine_grid.csv`
- `grid_search_improved/20251231_130402/stage3_robustness.csv`

### 전략 코드
- `base_longterm.py` (✅ 업데이트 완료)
- `grid_search_longterm_improved.py` (최적화 엔진)

### 문서
- `GRID_SEARCH_GUIDE.md` (사용 가이드)
- `OPTIMIZATION_RESULTS.md` (본 문서)

---

**작성일**: 2025-12-31
**버전**: 1.0
**작성자**: Claude Code (Anthropic)
